{% set anchorTag = block.navigationTitle|default('') ? block.navigationTitle|replace({' ': ''}) : '' %}

{# Todo: set default-spacing-margin--last-block automatically. #}
<div class="relative default-spacing-margin default-spacing-margin--last-block">
    {% if anchorTag %}
        <div id="{{ anchorTag }}" class="navigation-anchor navigation-anchor--default-margin js-navigation-anchor">
        </div>
    {% endif %}

    <div class="default-padding">
        <div class="default-max-width centered">
            <div class="default-max-width-text text-centered centered">
                {% if block.title %}
                    <div class="headline-second">
                        {{ block.title }}
                    </div>
                {% endif %}

                {% if block.description %}
                    <div>
                        {{ block.description|raw }}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    {% for subBlock in block.subBlocks %}
        {% if subBlock.type == 'topTechnologies' %}
            {% set topBlock = subBlock %}

            <div class="default-padding">
                <div class="default-max-width centered">
                    {% if topBlock.items %}
                        <div class="technologies-top-item-container">
                            {% for topItem in topBlock.items %}
                                <div class="text-centered">
                                    {% if topItem.image %}
                                        {% set image = topItem.image %}

                                        <div class="relative technologies-top-item-image">
                                            <img class="centered" src="{{ image.thumbnails['540x540'] }}"
                                                 alt="{{ image.title|default('') }}">

                                            <div class="headline-fourth headline-fourth--white
                                            technologies-top-item-image-description">
                                                {{ image.description }}
                                            </div>
                                        </div>
                                    {% endif %}

                                    {% if topItem.description %}
                                        <div>
                                            {{ topItem.description|raw }}
                                        </div>
                                    {% endif %}
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        {% else %}
            {% set tableBlock = subBlock %}

            <div class="default-padding technologies-table-container">
                <div id="{{ register_component('slider', { type: 'technology' }) }}" class="default-max-width centered">
                    {% if tableBlock.title %}
                        <div class="headline-fourth headline-fourth--white technologies-table-container-title">
                            {{ tableBlock.title }}
                        </div>
                    {% endif %}

                    {% if tableBlock.tables %}
                        <div class="technologies-table-navigation"
                             style="grid-template-columns: repeat({{ tableBlock.tables|length }}, max-content)">
                            {% for table in tableBlock.tables %}
                                {% if table.title %}
                                    {% set navigationItemClass = loop.index0 == 0 ?
                                        ' technologies-table-navigation-item' ~
                                        ' technologies-table-navigation-item--active' ~
                                        ' js-technologies-table-navigation-item' :
                                        ' technologies-table-navigation-item' ~
                                        ' js-technologies-table-navigation-item' %}

                                    {# Todo: only one div #}
                                    <div class="{{ navigationItemClass }}" data-index="{{ loop.index0 }}">
                                        <div class="inline-block technologies-table-navigation-item-text">
                                            {{ table.title }}
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}

                            <div class="inline-block technologies-table-navigation-prev-arrow js-technologies-prev-arrow">
                                <span><</span>
                            </div>

                            <div class="inline-block technologies-table-navigation-next-arrow js-technologies-next-arrow">
                                <span>></span>
                            </div>
                        </div>
                    {% endif %}

                    {% if tableBlock.tables %}
                        <div class="technologies-table-slide-container js-technologies-slider">
                            {% for table in tableBlock.tables %}
                                <div class="technologies-table-slide inline-block inline-block--top">
                                    <div class="default-padding technologies-table-slide-image-container">
                                        {% for image in table.images %}
                                            <div class="technologies-table-slide-image">
                                                <img class="centered" src="{{ image.thumbnails['540x540'] }}"
                                                     alt="{{ image.title|default('') }}">

                                                <div class="text-centered technologies-table-slide-image-text">
                                                    {{ image.description }}
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        {% endif %}
    {% endfor %}
</div>
